# åŠŸèƒ½æ¢³ç†ä¸å®ç°çŠ¶æ€æ€»è§ˆ

> 2024/05 èµ·ï¼ŒåŸ Node.js å®ç°å·²å…¨é¢æ›¿æ¢ä¸º Go ç‰ˆæœ¬ï¼ˆ`backend`ï¼‰ã€‚ä¸‹è¡¨åˆ†ä¸ºâ€œå·²è¿ç§»â€ä¸â€œå¾…è¿ç§»â€ä¸¤éƒ¨åˆ†ï¼Œä¾¿äºè¿½è¸ªåç«¯é‡æ„è¿›åº¦ã€‚

## 1. å·²è¿ç§»æ¥å£ï¼ˆGo æœåŠ¡ï¼‰

| ç¼–å· | åŠŸèƒ½ | è®¾è®¡å…³é”®ç‚¹ | ä»£ç å¯¹åº” | çŠ¶æ€ |
| --- | --- | --- | --- | --- |
| S-01 | å¯åŠ¨/ç™»å½• | æ¸¸å®¢æ¨¡å¼ã€ç­çº§é‚€è¯·ç ç™»å½• | `backend/internal/http/handlers/auth/handler.go` | âœ… |
| S-02 | é¦–é¡µ/å†’é™©åœ°å›¾ | ç« èŠ‚å²›å±¿ã€å…³å¡èŠ‚ç‚¹ | `backend/internal/http/handlers/student/handler.go` â†’ `Map` | âœ… |
| S-03 | å…³å¡å‡†å¤‡é¡µ | èƒœåˆ©æ¡ä»¶/å¯ç”¨ç§¯æœ¨/æ•™å­¦æ¼«ç”» | `backend/internal/http/handlers/student/handler.go` â†’ `Prep` | âœ… |
| S-04 | å…³å¡ä¸»ç•Œé¢ | åœºæ™¯/ç§¯æœ¨åº“/ç¨‹åºåŒº/ç›®æ ‡åŒº | `backend/internal/http/handlers/student/handler.go` â†’ `Run` | âœ… |
| S-05 | ç»“ç®—é¡µ | æ˜Ÿçº§ã€å¥–åŠ±ã€æœ€ä½³æ–¹æ¡ˆå·®è·ã€CTA | `backend/internal/http/handlers/student/handler.go` â†’ `Complete` | âœ… |
| S-08 | æ²™ç›’åˆ›ä½œ | åˆ›å»º/æµ‹è¯•/å‘å¸ƒã€ç§¯æœ¨åº“ | `backend/internal/http/handlers/student/handler.go` â†’ `Sandbox` | âœ… |
| T-04 | è¿›åº¦ä¸çœ‹æ¿ | çƒ­åŠ›å›¾ã€æ¦œå•ã€ç”¨æ—¶ç»Ÿè®¡ã€å›æ”¾ | `backend/internal/http/handlers/teacher/handler.go` | âœ… |
| B-01 | API å±‚ | Gin + OpenTelemetry è·¯ç”±å±‚ | `backend/cmd/api/main.go`ã€`backend/internal/http/router` | âœ… |
| B-03 | æ•°æ®åº“ä¸ç¼“å­˜ | MySQL/Redis è¿æ¥å°è£… | `backend/internal/platform/storage`ã€`backend/internal/platform/cache` | âœ… |
| B-05 | è§‚æµ‹ä¸æ¢é’ˆ | `/healthz`ã€`/readyz`ã€`/metrics` | `backend/internal/service/health` + `backend/internal/http/handlers/health` | âœ… |

## 2. å¾…è¿ç§»ä¸é‡æ„ä¸­çš„æ¥å£

| æ¨¡å— | åŠŸèƒ½ | è¿ç§»è¯´æ˜ |
| --- | --- | --- |
| å­¦ç”Ÿç«¯ | è§’è‰²è£…æ‰®ã€å›¾é‰´é¦†ã€ä½œå“åº“ã€è®¾ç½® | æ—§é€»è¾‘åœ¨ Node ç‰ˆä¸­å®ç°ï¼ŒGo ç‰ˆå¾…æ ¹æ®é¢†åŸŸæ¨¡å‹é‡å†™ã€‚ |
| æ•™å¸ˆç«¯ | è¯¾ç¨‹ç®¡ç†ã€å…³å¡ç¼–è¾‘ã€ç­çº§å¸ƒç½®ã€ä½œå“å®¡æ ¸ | éœ€ç»“åˆ sqlc æŸ¥è¯¢ä¸ asynq ä»»åŠ¡æ‹†åˆ†ï¼Œå½“å‰å ä½ç›®å½• `backend/internal/repo/`ã€‚ |
| å®¶é•¿ç«¯ | è¿›åº¦é¡µã€å‘¨æŠ¥ | åŸæœ‰ API æš‚æœªè¿ç§»ï¼Œå¾…ç¡®å®šä¸å­¦ç”Ÿç«¯è¿›åº¦æ¨¡å‹çš„æ˜ å°„ã€‚ |
| ç®¡ç†å‘˜ç«¯ | è¿è¥çœ‹æ¿ã€ç´ æä¸è´¦å·ç®¡ç†ã€æ•°æ®å¯¼å‡º | è®¡åˆ’æ‹†åˆ†ä¸ºç‹¬ç«‹å­æœåŠ¡ï¼ŒGo ç‰ˆæš‚æœªå®ç°ã€‚ |
| é¥æµ‹ | Tick/Hint äº‹ä»¶ã€å›æ”¾æ—¥å¿— | éœ€è¦è¡¥å……äº‹ä»¶è¡¨ç»“æ„ä¸ asynq å·¥ä½œæµï¼Œç›®å‰ä»…ä¿ç•™æ¥å£çº¦æŸã€‚ |
| è‡ªåŠ¨åŒ–æµ‹è¯• | é›†æˆæµ‹è¯•ã€å›æ”¾éªŒè¯ | Node ç‰ˆ Jest æµ‹è¯•å¾…æ›¿æ¢ä¸º Go + dockertestã€‚ |

## 3. äº¤äº’é—­ç¯éªŒæ”¶é¡¹

Go ç‰ˆæœ¬å°šæœªè¡¥é½è‡ªåŠ¨åŒ–å›å½’æµ‹è¯•ï¼ŒåŸæœ‰ Jest åœºæ™¯ä¿ç•™ä¸ºå‚è€ƒã€‚åç»­å°†åœ¨ `backend/cmd/api` å±‚è¡¥å…… httptest + dockertestï¼Œå¤ç”¨ä»¥ä¸‹æ ¸å¿ƒéªŒæ”¶æ€è·¯ï¼š

- AC-L1ï¼šæ–°æ‰‹ 60 ç§’é¦–é€šã€é”™è¯¯æç¤ºåŒ¹é…ã€é€šå…³è§£é”æ²™ç›’å¬å›ã€‚
- AC-L2ï¼šé¥æµ‹çƒ­åŠ›å›¾ã€å›æ”¾æŸ¥è¯¢ã€å¡å…³æ¦œå•ã€‚

| ç¼–å· | AC æŒ‡æ ‡ | ä»£ç å¯¹åº” | çŠ¶æ€ |
| --- | --- | --- | --- |
| AC-L1-01 | æ–°æ‰‹ â‰¤60s å®Œæˆé¦–å…³ | Go é›†æˆæµ‹è¯•å¾…è¡¥ï¼ˆè®¡åˆ’ï¼š`httptest` + dockertestï¼‰ | ğŸš§ |
| AC-L1-02 | å¤±è´¥æç¤ºä¸é”™è¯¯åŒ¹é… | `/api/student/hints/:levelId`ï¼ˆå¾…è¿ç§»ï¼‰ | ğŸš§ |
| AC-L1-03 | é€šå…³æ¨è¿›ä¸åŠ¨æœºæ–‡æ¡ˆ | `backend/internal/http/handlers/student` â†’ `Complete` | âœ… |
| AC-L1-04 | é€šå…³è§£é”æ²™ç›’å¹¶å¬å› | `backend/internal/http/handlers/student` â†’ `Sandbox` | âœ… |
| AC-L2-01 | é¥æµ‹ä¸æ¦‚å¿µçƒ­åŠ›å›¾ | `/api/teacher/analytics/*`ï¼ˆä»…å ä½è¿”å›ï¼‰ | ğŸš§ |
| AC-L2-02 | å…³å¡å›æ”¾ | `/api/teacher/analytics/replays/:studentId/:levelId`ï¼ˆå¾…å®ç°ï¼‰ | ğŸš§ |
| AC-L2-03 | å¡å…³æ¦œå•ä¸‹å‘å¤è®­å…³ | `/api/teacher/analytics/progress`ï¼ˆå¾…å®ç°ï¼‰ | ğŸš§ |

## 4. ç»“è®ºä¸å»ºè®®

ç³»ç»Ÿå·²å®Œæˆ Go å•ä½“æœåŠ¡çš„é¦–è½®è¿ç§»ï¼Œå®ç°æ ¸å¿ƒå­¦ç”Ÿè¿è¡Œé“¾è·¯ä¸æ•™å¸ˆåˆ†æéª¨æ¶ã€‚åç»­å»ºè®®ï¼š

1. è¡¥å……æ­£å¼å‰ç«¯ç•Œé¢ä¸è®¾è®¡è”è°ƒã€‚
2. å°†é¥æµ‹ä¸å·¥ä½œæµäº‹ä»¶è½åœ°åˆ° MySQL ä¸“ç”¨è¡¨æˆ–æ•°æ®ä»“åº“ã€‚
3. åœ¨ `docs/ç¯å¢ƒé…ç½®.md` æŒ‡å¼•ä¸‹å®Œå–„å®¹å™¨åŒ–ä¸ CI/CDã€‚
4. æ‰©å±•è‡ªå®šä¹‰æ¦œå•ä¸ä¸ªæ€§åŒ–æ¨èç®—æ³•ã€‚
