# 前端页面交互与样式评测报告

> 依据现有 React 前端代码，对主要页面的交互流程、视觉一致性与可访问性进行评估，并给出整改建议。

## 1. 总览

* **技术栈**：React 18 + Zustand + 自建 UI 组件库，页面内大量使用内联样式。
* **状态管理**：`useAppStore` 负责学生端登录与关卡状态，但教师/家长/管理员页面基本未接入全局状态或 API 数据。【F:frontend/apps/web/src/store/useAppStore.ts†L19-L204】【F:frontend/apps/web/src/app/pages/teacher/OverviewPage.tsx†L35-L189】
* **可访问性**：Button 组件无 `:focus` 样式，存在键盘可用性隐患；部分颜色对比未经过统一主题管理。【F:frontend/apps/web/src/components/ui/button.css†L1-L33】
* **响应式**：多处使用固定宽度（如 `gridTemplateColumns: '1fr 400px'`），缺少断点适配。【F:frontend/apps/web/src/app/pages/student/PlayPage.tsx†L180-L189】

## 2. 学生端页面评测

### 2.1 首页与地图

* `HomePage` 依赖 `Math.random()` 模拟连续学习天数，导致刷新即变更，缺少真实进度来源。【F:frontend/apps/web/src/app/pages/student/HomePage.tsx†L75-L89】
* `LevelsPage` 预设 `completed/unlocked/locked` 三种状态，但 Go 接口目前仍返回占位 `completed/locked`；筛选条件与 Badge 色值硬编码，未来拓展困难。【F:frontend/apps/web/src/app/pages/student/LevelsPage.tsx†L12-L114】【F:backend/internal/service/student/service.go†L17-L46】
* 建议：在 store 中增加“今日学习”统计缓存；引入配置化状态枚举与颜色映射表，避免散落的 inline 样式。

### 2.2 关卡游玩（PlayPage）

* 关卡数据来源为 `/levels/sample-1.json`，若服务器未托管该静态文件则直接报错，且与 API `Level` 定义不完全一致。【F:frontend/apps/web/src/app/pages/student/PlayPage.tsx†L54-L112】
* 右侧控制面板宽度固定 400px，不适配窄屏；按钮区均为 inline 样式，缺少复用组件/主题色变量。【F:frontend/apps/web/src/app/pages/student/PlayPage.tsx†L151-L199】
* 提示流程只在 `getHint` 后弹出 Modal，无提示分级或动画联动，未覆盖设计中的渐进策略。【F:frontend/apps/web/src/app/pages/student/PlayPage.tsx†L95-L187】
* 建议：
  * 将关卡数据改为 `apiClient.getStudentMap` + `getLevelPrep` 组合，增加错误 Toast。
  * 使用 CSS 模块/类名替换大量 inline 样式，提供响应式断点。
  * 引入提示队列和高亮动画（例如通过 `GameCanvas` 暴露 `highlightTiles`）。

### 2.3 Block Editor 与 Canvas

* BlockEditor 组件以 `<style>` 内嵌方式定义布局，缺乏可复用样式文件；循环次数、条件均为硬编码，阻碍教学策略调整。【F:frontend/apps/student/src/BlockEditor.tsx†L52-L173】
* `GameCanvas` 仅采用 Canvas 2D 网格渲染，没有胜利/失败动效或音效钩子，也未暴露手势操作能力。【F:frontend/apps/student/src/GameCanvas.tsx†L18-L120】
* 建议：抽离 CSS，增加参数编辑 UI，Canvas 中提供事件回调供 PlayPage 实现动效与配色切换。

### 2.4 成就、设置等

* `AchievementsPage` 与 `SettingsPage` 均使用本地默认值；设置保存只是 `console.log`，缺少成功提示与错误重试。【F:frontend/apps/web/src/app/pages/student/AchievementsPage.tsx†L68-L168】【F:frontend/apps/web/src/app/pages/student/SettingsPage.tsx†L22-L36】
* 建议：接入 `useMutation` 提交后端，加入 Skeleton/Toast，并将随机值改为真实统计。

## 3. 教师端页面评测

* `OverviewPage` 虽调用 API，但渲染层完全依赖 `mockStats` 等常量，实际接口数据未展示；缺乏空数据提示与异常处理。【F:frontend/apps/web/src/app/pages/teacher/OverviewPage.tsx†L35-L189】
* `AssignmentsPage`、`ContentPage`、`AnalyticsPage` 皆为静态表格或 EmptyState，占位文案未与交互绑定；按钮点击无路由跳转或抽屉数据来源。【F:frontend/apps/web/src/app/pages/teacher/AssignmentsPage.tsx†L8-L42】【F:frontend/apps/web/src/app/pages/teacher/ContentPage.tsx†L8-L37】【F:frontend/apps/web/src/app/pages/teacher/AnalyticsPage.tsx†L1-L13】
* `TeacherLayout` 中 Feature Flag 仅控制抽屉宽度，但无界面入口让运营切换标记；建议提供 Flag 面板或采用远端配置。【F:frontend/apps/web/src/app/pages/teacher/TeacherLayout.tsx†L9-L33】【F:frontend/apps/web/src/utils/featureFlags.ts†L1-L4】

## 4. 家长端页面评测

* 所有页面（Home/Progress/Settings）均为静态文本或表单占位，未调用 `/parent/children` 系列接口；进度图表和错题集缺失。【F:frontend/apps/web/src/app/pages/parent/HomePage.tsx†L5-L17】【F:frontend/apps/web/src/app/pages/parent/ProgressPage.tsx†L9-L20】【F:frontend/apps/web/src/app/pages/parent/SettingsPage.tsx†L11-L36】
* 建议：实现孩子选择器 → 加载进度/周报 → 支持导出 PDF；设置页提交后弹出反馈。

## 5. 管理端页面评测

* Admin 模块的 Overview/Users/Curriculum/Ops 皆依赖硬编码数组与 EmptyState，未对接 `/api/admin/*`、`/api/admin/assets` 等接口，按钮操作无副作用。【F:frontend/apps/web/src/app/pages/admin/OverviewPage.tsx†L1-L14】【F:frontend/apps/web/src/app/pages/admin/UsersPage.tsx†L8-L40】【F:frontend/apps/web/src/app/pages/admin/CurriculumPage.tsx†L5-L10】【F:frontend/apps/web/src/app/pages/admin/OpsPage.tsx†L6-L23】
* 建议：
  * 使用 React Query 统一数据获取，提供加载/错误占位。
  * 给“编辑”“创建”按钮添加表单或 Drawer，与素材管理、账号管理 API 连通。

## 6. 共享 UI 组件建议

* 按钮与卡片组件虽有基础样式，但缺乏主题/尺寸体系，建议引入 design token（色值、间距）与 variant 规范，避免重复 inline style。【F:frontend/apps/web/src/components/ui/Button.tsx†L13-L28】【F:frontend/apps/web/src/components/ui/button.css†L1-L33】【F:frontend/apps/web/src/components/ui/Card.tsx†L7-L22】
* Skeleton、EmptyState、Modal 等组件未统一在一个命名空间下维护故事板/示例，影响设计一致性。建议补充 Storybook 或文档。

## 7. 优先整改列表

1. **接入真实数据**：PlayPage/OverviewPage/Parent 模块优先替换 mock 数据，保证核心流程可 demo。【F:frontend/apps/web/src/app/pages/student/PlayPage.tsx†L54-L112】【F:frontend/apps/web/src/app/pages/teacher/OverviewPage.tsx†L35-L189】【F:frontend/apps/web/src/app/pages/parent/HomePage.tsx†L5-L17】
2. **样式系统化**：提取 inline 样式到 CSS/SCSS 模块，增加响应式断点与 `:focus` 状态，满足设计规范。【F:frontend/apps/web/src/app/pages/student/PlayPage.tsx†L151-L199】【F:frontend/apps/web/src/components/ui/button.css†L1-L33】
3. **提示与动效**：根据 `computeHint` 结果展示分级提示，并在 GameCanvas 加入成功/失败动画钩子，提升教学反馈。【F:frontend/apps/web/src/app/pages/student/PlayPage.tsx†L95-L187】【F:frontend/apps/student/src/GameCanvas.tsx†L18-L120】
4. **后台操作闭环**：为教师/管理员页面补充抽屉表单、批量操作与错误处理，确保按钮非摆设。【F:frontend/apps/web/src/app/pages/teacher/AssignmentsPage.tsx†L8-L42】【F:frontend/apps/web/src/app/pages/admin/UsersPage.tsx†L8-L40】

---

通过以上整改，可使前端界面从“展示型原型”迈向“可真实联调的教学平台”，同时满足设计文档中的交互闭环要求。
